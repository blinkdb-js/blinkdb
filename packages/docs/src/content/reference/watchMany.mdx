---
title: "watchMany()"
package: "@blinkdb/vue"
---

# watchMany()

Retrieves entities from the table. If a [filter](/docs/filters) is supplied, blinkDB will only
return matching items - if not given, all items are returned.

```vue
<script setup>
import { watchMany } from '@blinkdb/vue';
import { userTable } from './tables.ts';

const { data: usersAged40 } = watchMany(userTable, {
  where: { age: 40 }
});
</script>

<template>
  <span v-for="user in usersAged40">
    {{ user.name }}
  </span>
</template>
```

| Parameter | Description                                                                             |
| --------- | --------------------------------------------------------------------------------------- |
| `table`   | The table created by [`createTable()`](createtable) .                                   |
| `filter`  | Optional. If given, items returned will match the filter. See [filters](/docs/filters). |

## Query State

`watchMany()` is asynchronous, which means the queried data isn't available immediately.
Instead, it returns an object containing the current query state, the data (if present), and zero or one error (if your query threw an error).

The query starts out in the `loading` state, fetches the items, and then continues to the `done` state if items were
successfully retrieved, or to the `error` state if retrieving the items caused an error.

```ts
interface QueryResult<T> {
  // The items if successful,
  // or `undefined` if the query is not done yet
  data: T[]|undefined;
  // An error object if the query has produced an error
  error: Error|undefined;
  // The current state of the query
  state: "loading"|"done"|"error";
}
```

You can use the additional information to display error & loading indicators while you wait for your query to complete:

```vue
<script setup>
import { watchMany } from '@blinkdb/vue';
import { userTable } from './tables.ts';
import { UserCard } from './UserCard.vue';

const { data: usersAged40 } = watchMany(userTable, {
  where: { age: 40 }
});
</script>

<template>
  <span v-if="error">An error occurred: {{error}}</span>
  <span v-if="state === 'loading'">Loading users...</span>
  <div v-else v-for="user in usersAged40">
    <UserCard :user="user"></UserCard>
  </div>
</template>
```

## Retrieve all items

If no second parameter is supplied, `watchMany()` will return all items in the table.

```ts
// Retrieve all users
const { data: users } = watchMany(userTable);
```

## Retrieve items that match a filter

If a [filter](/docs/filters) is provided as the second parameter, `watchMany()` returns all items that match the filter.

```ts
// Retrieve all users named Bob
const { data: bobUsers } = watchMany(userTable, {
  where: { name: "Bob" }
});
```
